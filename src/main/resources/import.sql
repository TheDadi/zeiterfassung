DROP TABLE IF EXISTS GROUPED_JOURNAL;
DROP TABLE IF EXISTS JOURNAL;
DROP TABLE IF EXISTS TASK;
DROP TABLE IF EXISTS BUCHART;

COMMIT;

CREATE TABLE TASK(NAME VARCHAR(60)  NOT NULL PRIMARY KEY,PLANTANAME VARCHAR(60) ,VERBUCHBAR BOOLEAN NOT NULL,BUCHART VARCHAR(30) ); 

CREATE TABLE JOURNAL(DATUM DATE NOT NULL, STUNDEN FLOAT NOT NULL,BEMERKUNG VARCHAR(120) ,PLANTAVERBUCHT BOOLEAN DEFAULT FALSE,TASK VARCHAR(60)  NOT NULL,NR INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 0)  NOT NULL PRIMARY KEY, FOREIGN KEY(TASK)  REFERENCES TASK(NAME)  ON UPDATE CASCADE); 

CREATE  TABLE BUCHART(ART VARCHAR(30)  NOT NULL PRIMARY KEY); 

CREATE VIEW GROUPED_JOURNAL AS SELECT J.DATUM, SUM(J.STUNDEN) AS STUNDEN, J.TASK FROM JOURNAL J GROUP BY J.DATUM, J.TASK;

ALTER TABLE TASK ADD CONSTRAINT SYS_FK_185 FOREIGN KEY(BUCHART)  REFERENCES BUCHART(ART)  ON UPDATE CASCADE;

INSERT INTO BUCHART VALUES('nicht'); 
INSERT INTO BUCHART VALUES('planta'); 
INSERT INTO BUCHART VALUES('sap'); 
INSERT INTO BUCHART VALUES('sap 90%'); 

INSERT INTO TASK VALUES('90%','',TRUE,'sap 90%'); 
INSERT INTO TASK VALUES('90%temp09','',TRUE,'sap 90%'); 
INSERT INTO TASK VALUES('Tod','Tod',TRUE,'sap'); 
INSERT INTO TASK VALUES('android','Android Entwicklung',TRUE,'planta'); 
INSERT INTO TASK VALUES('broker','DI10.05 - Broker/Vermittler Portal',TRUE,'planta'); 
INSERT INTO TASK VALUES('claims','Excel PO',TRUE,'planta'); 
INSERT INTO TASK VALUES('com2','COM II ',TRUE,'planta'); 
INSERT INTO TASK VALUES('copjava','ZL Tagesgeschäft WIS: CoP Java ',TRUE,'planta'); 
INSERT INTO TASK VALUES('drive2011','Web2010, Drive 2011',TRUE,'planta'); 
INSERT INTO TASK VALUES('feiertage','bezahlte Feiertage',TRUE,'sap'); 
INSERT INTO TASK VALUES('feiertage_kompensiert','zu kompensierende Feiertage',TRUE,'sap'); 
INSERT INTO TASK VALUES('ferien','SAP',TRUE,'sap'); 
INSERT INTO TASK VALUES('gwt','CC Java 2011, Umsetzung 2011 - GWT',TRUE,'planta'); 
INSERT INTO TASK VALUES('hh','',FALSE,'nicht'); 
INSERT INTO TASK VALUES('inder','PVMS2ePlatform Design 30.20',TRUE,'planta'); 
INSERT INTO TASK VALUES('inder_infra','PVMS2ePlatform Design 30.20',TRUE,'planta'); 
INSERT INTO TASK VALUES('inder_int_konzept','PVMS2ePlatform Design 30.20',TRUE,'planta'); 
INSERT INTO TASK VALUES('integration','ZL Tagesgeschäft WIS: Dienstleistg. - Integration / Projekt',TRUE,'planta'); 
INSERT INTO TASK VALUES('iphone','Schadenmeldung per Mobilephone  ä Task IT Testung. ',TRUE,'planta'); 
INSERT INTO TASK VALUES('iqs','EL11.04 Konsolidierung Offertsysteme IL',TRUE,'planta'); 
INSERT INTO TASK VALUES('jip','ZL Tagesgeschäft WIS: Dienstleistungen - JIP',TRUE,'planta'); 
INSERT INTO TASK VALUES('krank','SAP',TRUE,'sap'); 
INSERT INTO TASK VALUES('linie','',FALSE,'nicht'); 
INSERT INTO TASK VALUES('m32-gui','4.30',TRUE,'planta'); 
INSERT INTO TASK VALUES('m32-kern','4.20',TRUE,'planta'); 
INSERT INTO TASK VALUES('m32-pm','1.10',TRUE,'planta'); 
INSERT INTO TASK VALUES('m32-rampup','4.10',TRUE,'planta'); 
INSERT INTO TASK VALUES('m32-refactor','vorgebucht',TRUE,'planta'); 
INSERT INTO TASK VALUES('newbox','Excel PO jeweils montags',TRUE,'planta'); 
INSERT INTO TASK VALUES('pdbsoap',' IT11004  - P2.1000 Rollout ADB Services',TRUE,'planta'); 
INSERT INTO TASK VALUES('pdbui','PP2011 - PDB GUI Erweiterung',TRUE,'planta'); 
INSERT INTO TASK VALUES('review','im jeweiligen Projekt',TRUE,'planta'); 
INSERT INTO TASK VALUES('schulung','SAP',TRUE,'sap'); 
INSERT INTO TASK VALUES('seam','CC Java 2011, Umsetzung 2011 - JSF-Seam',TRUE,'planta'); 
INSERT INTO TASK VALUES('stiften','',FALSE,'nicht'); 
INSERT INTO TASK VALUES('unbezahlt','SAP unbezahlter Urlaub',TRUE,'sap'); 
INSERT INTO TASK VALUES('verwaltung','',FALSE,'nicht'); 
INSERT INTO TASK VALUES('vesba','VESBA 2.00 Kleinaufträge IT Efficiency',TRUE,'planta'); 
INSERT INTO TASK VALUES('zso','SAP',TRUE,'sap'); 

INSERT INTO JOURNAL VALUES('2014-03-22',8.4E0,'WebService',FALSE,'schulung',1639); ; 
INSERT INTO JOURNAL VALUES('2014-03-23',8.4E0,'WebService',TRUE,'schulung',1640); ; 
INSERT INTO JOURNAL VALUES('2014-03-26',2.0E0,'SDL',TRUE,'copjava',1641); ; 
INSERT INTO JOURNAL VALUES('2014-03-26',2.0E0,'',TRUE,'linie',1642); ; 
INSERT INTO JOURNAL VALUES('2014-03-26',4.0E0,'JBoss7',FALSE,'broker',1643); ; 
INSERT INTO JOURNAL VALUES('2014-03-27',8.0E0,'JBoss7',FALSE,'broker',1644); ; 
INSERT INTO JOURNAL VALUES('2014-03-28',4.0E0,'JBoss7',FALSE,'broker',1645); ; 
INSERT INTO JOURNAL VALUES('2014-03-28',4.2E0,'',TRUE,'90%',1646); ; 
INSERT INTO JOURNAL VALUES('2014-03-29',8.0E0,'',TRUE,'broker',1647); 
INSERT INTO JOURNAL VALUES('2014-03-30',4.0E0,'',FALSE,'iqs',1648); 
INSERT INTO JOURNAL VALUES('2014-03-30',4.0E0,'',TRUE,'broker',1649); 
INSERT INTO JOURNAL VALUES('2014-04-02',2.0E0,'',TRUE,'hh',1650); 
INSERT INTO JOURNAL VALUES('2014-04-02',1.0E0,'',FALSE,'linie',1651); 
INSERT INTO JOURNAL VALUES('2014-04-02',5.0E0,'',TRUE,'broker',1652); 
INSERT INTO JOURNAL VALUES('2014-04-03',2.0E0,'',FALSE,'broker',1653); 
INSERT INTO JOURNAL VALUES('2014-04-03',2.0E0,'',TRUE,'com2',1655); 
INSERT INTO JOURNAL VALUES('2014-04-03',4.2E0,'',TRUE,'90%',1656); 
INSERT INTO JOURNAL VALUES('2014-04-04',2.0E0,'',FALSE,'com2',1657); 
INSERT INTO JOURNAL VALUES('2014-04-04',6.0E0,'',FALSE,'broker',1658); 
INSERT INTO JOURNAL VALUES('2014-04-05',2.0E0,'',TRUE,'copjava',1659); 
INSERT INTO JOURNAL VALUES('2014-04-05',1.0E0,'Oiapecken - Oierhiartn',TRUE,'linie',1660); 
INSERT INTO JOURNAL VALUES('2014-04-05',5.0E0,'',TRUE,'broker',1661); 
INSERT INTO JOURNAL VALUES('2014-04-06',8.4E0,'Karfreitag',TRUE,'feiertage',1662); 
INSERT INTO JOURNAL VALUES('2014-04-09',8.4E0,'Ostermontag',TRUE,'feiertage',1663); 
INSERT INTO JOURNAL VALUES('2014-04-10',2.0E0,'',TRUE,'com2',1664); 
INSERT INTO JOURNAL VALUES('2014-04-10',6.0E0,'',TRUE,'broker',1665); 
INSERT INTO JOURNAL VALUES('2014-04-11',3.0E0,'',TRUE,'broker',1666); 
INSERT INTO JOURNAL VALUES('2014-04-11',1.0E0,'',TRUE,'com2',1667); 
INSERT INTO JOURNAL VALUES('2014-04-11',4.2E0,'',TRUE,'90%',1668); 
INSERT INTO JOURNAL VALUES('2014-04-12',1.0E0,'',TRUE,'iqs',1669); 
INSERT INTO JOURNAL VALUES('2014-04-12',6.0E0,'',TRUE,'broker',1670); 
INSERT INTO JOURNAL VALUES('2014-04-13',8.0E0,'',TRUE,'broker',1671); 
INSERT INTO JOURNAL VALUES('2014-04-16',4.0E0,'',TRUE,'broker',1672); 
INSERT INTO JOURNAL VALUES('2014-04-16',4.2E0,'',TRUE,'90%',1673); 
INSERT INTO JOURNAL VALUES('2014-04-17',1.0E0,'',TRUE,'verwaltung',1674); 
INSERT INTO JOURNAL VALUES('2014-04-17',3.0E0,'knoffhoff',TRUE,'linie',1675); 
INSERT INTO JOURNAL VALUES('2014-04-17',1.0E0,'',TRUE,'com2',1676); 
INSERT INTO JOURNAL VALUES('2014-04-17',3.0E0,'',TRUE,'broker',1677); 
INSERT INTO JOURNAL VALUES('2014-04-18',8.4E0,'WK ZGF',TRUE,'zso',1679); 
INSERT INTO JOURNAL VALUES('2014-04-19',8.4E0,'WK ZGF',TRUE,'zso',1680); 
INSERT INTO JOURNAL VALUES('2014-04-20',7.0E0,'',TRUE,'broker',1681); 
INSERT INTO JOURNAL VALUES('2014-04-20',1.0E0,'Kennelernen',TRUE,'stiften',1683); 
INSERT INTO JOURNAL VALUES('2014-04-23',1.0E0,'',TRUE,'linie',1684); 
INSERT INTO JOURNAL VALUES('2014-04-23',7.0E0,'',TRUE,'broker',1685); 
INSERT INTO JOURNAL VALUES('2014-04-24',8.0E0,'',TRUE,'broker',1686); 
INSERT INTO JOURNAL VALUES('2014-04-25',3.0E0,'',TRUE,'com2',1687); 
INSERT INTO JOURNAL VALUES('2014-04-25',3.0E0,'g2g',TRUE,'linie',1688); 
INSERT INTO JOURNAL VALUES('2014-04-25',2.0E0,'',TRUE,'broker',1689); 
INSERT INTO JOURNAL VALUES('2014-04-27',4.0E0,'',TRUE,'broker',1690); 
INSERT INTO JOURNAL VALUES('2014-05-08',4.2E0,'',TRUE,'90%',1691); 
INSERT INTO JOURNAL VALUES('2014-05-09',1.0E0,'',TRUE,'copjava',1692); 
INSERT INTO JOURNAL VALUES('2014-05-09',1.0E0,'',TRUE,'com2',1693); 
INSERT INTO JOURNAL VALUES('2014-05-10',6.0E0,'',TRUE,'broker',1694); 
